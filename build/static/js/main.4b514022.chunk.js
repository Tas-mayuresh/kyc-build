(this.webpackJsonpkyc_authentication=this.webpackJsonpkyc_authentication||[]).push([[0],{199:function(e,t,n){},301:function(e,t){},31:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"l",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return O})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return f}));var a=n(6),s=n(14),r=n(43),c=n.n(r),i="https://kyc-project-api.herokuapp.com/api",o=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n,s){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"post",url:i+"/Users/create-user",data:{name:t,email:t,password:n,role:"2",walletAddress:s},headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n,s){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"post",url:i+"/Users/create-user",data:{name:t,email:t,password:n,role:"3",walletAddress:s},headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n){var s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"post",url:i+"/Users/login-user",data:{email:t,password:n},headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n){var s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"post",url:i+"/Documents/create-document?access_token="+n,data:t,headers:{"content-type":"multipart/form-data",Accept:"application/json"}});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"get",url:i+"/Documents/get-document-by-auth?access_token="+t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n){var s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"put",url:i+"/Documents/document-active-deactive?access_token="+n,data:{id:t,status:"deactive"},headers:{Accept:"application/json"}});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var t=Object(s.a)(Object(a.a)().mark((function t(n){var s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="data:application/pdf;base64,",t.next=3,fetch("http://"+n,{headers:{Accept:"application/text"}}).then((function(e){return e.ok?e.arrayBuffer():e.status.toString()})).then((function(t){var n=e.from(t).toString("base64");console.log(n),s+=n})).catch((function(e){return e.Message}));case 3:return t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"get",url:i+"/Documents/get-UserData-by-user-id?user_id="+t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"get",url:i+"/Documents/doctype-list-by-user?username="+t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t){var n,s;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=2==t?"customer":"merchant",e.next=3,c()({method:"get",url:i+"/Users/user-count?role="+n});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"get",url:i+"/Websites/get-website"});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(Object(a.a)().mark((function e(t,n,s){var r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"put",url:i+"/Websites/update-website?access_token="+s,data:{noOfDocumentAllowed:t,documentTypeList:n,id:"633c108dc92054001626bd99"},headers:{Accept:"application/json"}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}).call(this,n(15).Buffer)},318:function(e,t,n){},320:function(e,t,n){},349:function(e,t){},352:function(e,t){},355:function(e,t){},359:function(e,t){},360:function(e,t){},386:function(e,t){},388:function(e,t){},403:function(e,t){},405:function(e,t){},420:function(e,t){},436:function(e,t){},438:function(e,t){},450:function(e,t){},451:function(e,t){},526:function(e,t){},527:function(e,t){},649:function(e,t){},674:function(e,t){},675:function(e,t){},676:function(e,t){},677:function(e,t){},678:function(e,t){},679:function(e,t,n){},680:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(51),c=n.n(r),i=(n(318),n(6)),o=n(14),l=n(4),d=(n(319),n(694)),u=(n(320),n(10)),j=(n(321),n(0)),b=Object(a.createContext)(),p=function(e){var t=Object(a.useState)({walletAddress:"",isConnected:!1,username:"",accessToken:"",web3:null,role:null,KYCContract:null,INRTContract:null}),n=Object(l.a)(t,2),s=n[0],r=n[1];return Object(j.jsx)(b.Provider,{value:[s,r],children:e.children})},m=n(63),h=n(35),O=n(697),x=n(688),f=n(309),y=n(695),g=function(e){var t=Object(a.useContext)(b),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(h.g)();Object(h.h)();Object(a.useEffect)((function(){e.updateBalance()}),[s]);var i;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(O.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",expand:"lg",children:Object(j.jsxs)(x.a,{children:[Object(j.jsx)(O.a.Brand,{href:"/",children:"KYC Authentication"}),""!=s.username?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(O.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end",children:Object(j.jsxs)(f.a,{children:[Object(j.jsxs)(f.a.Link,{onClick:function(){return e.updateBalance()},children:[Object(j.jsx)("span",{children:"INRT Tokens: "}),e.tokenCount]}),Object(j.jsx)(y.a,{title:(i=s.walletAddress,i.substr(0,5)+"...."+i.slice(-4)),children:Object(j.jsx)(y.a.Item,{href:"#",onClick:function(){r({walletAddress:"",isConnected:!1,username:"",web3:null,role:null,KYCContract:null,INRTContract:null}),c.push("/")},children:"Logout"})})]})})]}):Object(j.jsx)(j.Fragment,{})]})})})},v=n(689),w=n(306),T=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(x.a,{children:Object(j.jsx)(v.a,{className:"justify-content-md-center",style:{color:"white"},children:Object(j.jsxs)(w.a,{children:["Copyright ",(new Date).getFullYear(),"\xa9 All Rights Reserved "]})})})})},k=n(93),C=n.n(k),N=n(305),A="0x93003d8286eEEB50AaDa400070aB93A0c5bD1Ed5",D=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"previousAdmin",type:"address"},{indexed:!1,internalType:"address",name:"newAdmin",type:"address"}],name:"AdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"beacon",type:"address"}],name:"BeaconUpgraded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"username",type:"string"},{indexed:!1,internalType:"string",name:"password",type:"string"},{indexed:!1,internalType:"address",name:"userWalletAddress",type:"address"}],name:"CustomerAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"username",type:"string"},{indexed:!1,internalType:"string",name:"documentPackageHash",type:"string"},{indexed:!1,internalType:"string",name:"password",type:"string"},{indexed:!1,internalType:"address",name:"userWalletAddress",type:"address"}],name:"Customerupdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"username",type:"string"},{indexed:!1,internalType:"string",name:"password",type:"string"},{indexed:!1,internalType:"address",name:"userWalletAddress",type:"address"}],name:"MerchantAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"fromUsername",type:"string"},{indexed:!1,internalType:"string",name:"toUsername",type:"string"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"string",name:"_documentsAllowed",type:"string"},{indexed:!1,internalType:"string",name:"info",type:"string"},{indexed:!1,internalType:"int8",name:"status",type:"int8"}],name:"RequestAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"fromUsername",type:"string"},{indexed:!1,internalType:"string",name:"toUsername",type:"string"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"string",name:"documentsAllowed",type:"string"},{indexed:!1,internalType:"string",name:"info",type:"string"},{indexed:!1,internalType:"int8",name:"status",type:"int8"}],name:"RequestStatusChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"},{internalType:"string",name:"_documentsAllowed",type:"string"},{internalType:"uint256",name:"_closeTime",type:"uint256"}],name:"approveRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"},{internalType:"bool",name:"status",type:"bool"}],name:"approveRequestByOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"}],name:"checkRequestStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"}],name:"claimMerchantReferralReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"}],name:"closeAccess",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"string",name:"_password",type:"string"},{internalType:"string",name:"_referralMerchant",type:"string"}],name:"createCustomer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"string",name:"_password",type:"string"}],name:"createMerchant",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"string",name:"_password",type:"string"}],name:"customerLogin",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"}],name:"getAccessAllowedByAdmin",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"}],name:"getAllMyAccessHistoryLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"uint256",name:"i",type:"uint256"}],name:"getAllMyCustomersRequestsData",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"}],name:"getAllMyCustomersRequestsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"uint256",name:"i",type:"uint256"}],name:"getAllMyMerchantsRequestsData",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"}],name:"getAllMyMerchantsRequestsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"}],name:"getAllRequestsData",outputs:[{components:[{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"string",name:"documentsAllowed",type:"string"},{internalType:"string",name:"info",type:"string"},{internalType:"uint256",name:"openTime",type:"uint256"},{internalType:"uint256",name:"closeTime",type:"uint256"},{internalType:"int8",name:"status",type:"int8"}],internalType:"struct KYCContract.Request",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBDLTToken",outputs:[{internalType:"contract IBDLT20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"uint256",name:"i",type:"uint256"}],name:"getMyAccessHistoryData",outputs:[{components:[{internalType:"string",name:"fromUsername",type:"string"},{internalType:"uint256",name:"fromTimestamp",type:"uint256"},{internalType:"uint256",name:"toTimestamp",type:"uint256"},{internalType:"string",name:"info",type:"string"},{internalType:"string",name:"documentsAllowed",type:"string"}],internalType:"struct KYCContract.History",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_toUsername",type:"string"}],name:"getMyData",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReferralRewardValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRequestFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"}],name:"getUserData",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"string",name:"_password",type:"string"}],name:"merchantLogin",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"}],name:"merchantReferralRewardCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"}],name:"rejectRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_fromMerchant",type:"string"},{internalType:"string",name:"_toUsername",type:"string"},{internalType:"string",name:"_documentsAllowed",type:"string"},{internalType:"string",name:"_info",type:"string"}],name:"sendAccessRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IBDLT20",name:"token",type:"address"}],name:"setBDLTToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_referralRewardValue",type:"uint256"}],name:"setReferralRewardValue",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_fees",type:"uint256"}],name:"setRequestFees",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_username",type:"string"},{internalType:"string",name:"_documentPackageHash",type:"string"},{internalType:"string",name:"_password",type:"string"}],name:"updateCustomerData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"}],name:"upgradeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"}],S=n.p+"static/media/user.5b6d8fe4.png",I=n.p+"static/media/merchant.825aa4fb.png";n(199);var L=function(e){var t=Object(h.g)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(x.a,{children:[Object(j.jsx)("div",{className:"home-heading",children:Object(j.jsx)("h2",{children:" Who are you? "})}),Object(j.jsx)("div",{className:"user-row-ht",children:Object(j.jsxs)("div",{className:"user-row",children:[Object(j.jsxs)("div",{className:"user-box",children:[Object(j.jsx)("img",{src:I}),Object(j.jsx)("div",{className:"btn-row",children:Object(j.jsx)(N.a,{onClick:function(){return t.push("/merchant/login")},children:" Merchants "})})]}),Object(j.jsxs)("div",{className:"user-box",children:[Object(j.jsx)("img",{src:S}),Object(j.jsx)("div",{className:"btn-row",children:Object(j.jsx)(N.a,{onClick:function(){return t.push("/login")},children:" Users "})})]})]})})]})})},M=n(2),R=n(696),q="0xB6cB7f498653D5F109800FCa71EbD3f365415291",F=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{constant:!0,inputs:[],name:"_decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"canPause",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getOwner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],E=n(31),_=n(648),U="U2FsdGVkX18ZUVvShFSES21qHsQEqZXMxQ9zgHy+bu0=";function B(e){return _.AES.encrypt(e,U).toString()}function P(e){return _.AES.decrypt(e,U).toString(_.enc.Utf8)}var K=function(e){var t=Object(a.useContext)(b),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),p=d[0],m=d[1],O=Object(a.useState)(0),f=Object(l.a)(O,2),y=f[0],g=f[1],v=Object(h.g)();function w(){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window||"undefined"===typeof window.web3){e.next=37;break}return t=new C.a(window.web3.currentProvider),e.next=4,t.eth.net.getId();case 4:s=e.sent,"",console.log(s),e.t0=s,e.next=97===e.t0?10:13;break;case 10:return"BSC",console.log("Network is BSC mainnet"),e.abrupt("break",16);case 13:return u.b.error("Please select mainnet first"),console.error("Please select mainnet first"),e.abrupt("return");case 16:return t.eth.net.getNetworkType().then(console.log),e.prev=17,e.next=20,window.ethereum.request({method:"eth_requestAccounts"});case 20:c=e.sent,e.next=27;break;case 23:return e.prev=23,e.t1=e.catch(17),4001===e.t1.code&&console.error("Please allow metamask to connect"),e.abrupt("return");case 27:if(console.log(c),!(c.length<1)){e.next=31;break}return console.error("Please unlock metamask wallet first!"),e.abrupt("return");case 31:console.log(c[0]),n=new t.eth.Contract(D,A),a=new t.eth.Contract(F,q),r({walletAddress:c[0],isConnected:!0,username:"",web3:t,role:null,KYCContract:n,INRTContract:a}),e.next=38;break;case 37:console.error("Metamask wallet not found! Please make sure wallet is installed and running!");case 38:case"end":return e.stop()}}),e,null,[[17,23]])})))).apply(this,arguments)}Object(a.useEffect)((function(){if(localStorage.getItem("rememberMe")){var t=localStorage.getItem("username");m(t)}return window.ethereum&&(window.ethereum.on("chainChanged",(function(){window.location.reload()})),window.ethereum.on("accountsChanged",(function(e){w()})),w()),function(){e.setLoading(!1)}}),[]);var k=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,c,o,l,d,j,b;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setLoading(!0),a={username:n.target.username.value,password:n.target.password.value},localStorage.setItem("rememberMe",n.target.rememberMe.checked),localStorage.setItem("username",p),0!=y){t.next=28;break}return null==s.KYCContract&&w(),t.prev=7,t.next=10,s.KYCContract.methods.customerLogin(a.username,a.password).call({from:s.walletAddress});case 10:if(c=t.sent,console.log(c),!c[0]){t.next=18;break}return t.next=15,Object(E.l)(a.username,a.password);case 15:o=t.sent,console.log(o),o.success?(r(Object(M.a)(Object(M.a)({},s),{username:a.username,role:o.response.user.role,accessToken:o.response.accessToken})),v.push("/home")):u.b.error("Error while login call");case 18:t.next=26;break;case 20:t.prev=20,t.t0=t.catch(7),l=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),d=l.substr(0,l.indexOf('"')),u.b.error(d),console.log(t.t0);case 26:t.next=63;break;case 28:if(a.referral=n.target.referral.value,0!=s.connect){t.next=32;break}return u.b.error("Please connect metamask first"),t.abrupt("return");case 32:return t.prev=32,t.next=35,s.KYCContract.methods.createCustomer(a.username,a.password,a.referral).send({from:s.walletAddress});case 35:if(j=t.sent,console.log(j),!j){t.next=53;break}return t.prev=38,c=j.events.CustomerAdded.returnValues,t.next=42,Object(E.a)(a.username,a.password,s.walletAddress);case 42:b=t.sent,console.log(b),b.success?u.b.success("Account created successfully!"):u.b.error("Error while create account call"),t.next=51;break;case 47:t.prev=47,t.t1=t.catch(38),u.b.error(t.t1.message),console.log(t.t1.message);case 51:t.next=55;break;case 53:u.b.error("Error while creating account"),console.error("Error while creating account");case 55:t.next=63;break;case 57:t.prev=57,t.t2=t.catch(32),l=t.t2.message.substr(t.t2.message.indexOf('"message": "')+12),d=l.substr(0,l.indexOf('"')),u.b.error(d),console.log(t.t2.message);case 63:e.setLoading(!1);case 64:case"end":return t.stop()}}),t,null,[[7,20],[32,57],[38,47]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(x.a,{children:Object(j.jsxs)("div",{className:"login-page",children:[Object(j.jsx)("div",{className:"home-heading",children:Object(j.jsxs)("h2",{children:[" ",0==y?"Login":"Sign Up"]})}),Object(j.jsxs)(R.a,{onSubmit:k,children:[Object(j.jsxs)(R.a.Group,{className:"mb-3 input-form",controlId:"formUsername",children:[Object(j.jsx)(R.a.Label,{children:"Username"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"username",id:"username",placeholder:"Enter Username",value:p,onChange:function(e){m(e.target.value)},required:!0})]}),Object(j.jsxs)(R.a.Group,{className:"mb-3 input-form",controlId:"formPassword",children:[Object(j.jsx)(R.a.Label,{children:"Password"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"password",id:"password",placeholder:"Password",required:!0})]}),1==y?Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"fromReferralMerchnat",children:[Object(j.jsx)(R.a.Label,{children:"Referral"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"text",id:"referral",placeholder:"Enter Referral"})]}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"formRememberMe",children:Object(j.jsx)(R.a.Check,{type:"checkbox",id:"rememberMe",label:"Remember me "})}),Object(j.jsx)("div",{className:"btn-row",children:Object(j.jsx)(N.a,{variant:"primary",type:"submit",disabled:e.loading,children:0==y?"Login":"Sign Up"})}),Object(j.jsx)("div",{className:"login-sp-text",children:0==y?Object(j.jsxs)("p",{className:"nt-member",children:["Not a member? ",Object(j.jsx)("a",{href:"#",onClick:function(){return g(1)},children:"Sign up now"})]}):Object(j.jsxs)("p",{className:"nt-member ",children:["already a member? ",Object(j.jsx)("a",{href:"#",onClick:function(){return g(0)},children:"Login now"})]})})]})]})})})},Y=n(692),z=n(691),V=n(693),G=n(699),H=n(698);var W=function(e){var t=Object(a.useState)("5"),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)("minutes"),i=Object(l.a)(c,2),o=i[0],d=i[1];Object(a.useEffect)((function(){b()}),[e.modalshow]);var b=function(){if(void 0!=e.accessrequestdata.documentsAllowed){var t=JSON.parse(e.accessrequestdata.documentsAllowed);e.documentsdata.forEach((function(e,n){null!=t[e.documentType]&&(document.getElementById("select"+n).checked=!0,"View"==t[e.documentType]?document.getElementById("view"+n).checked=!0:"Download"==t[e.documentType]&&(document.getElementById("download"+n).checked=!0))}))}},p=function(){var t,n={};if(e.documentsdata.forEach((function(e,t){if(document.getElementById("select"+t).checked)if(document.getElementById("view"+t).checked){var a=document.getElementById("view"+t).value;n[e.documentType]=a}else if(document.getElementById("download"+t).checked){var s=document.getElementById("download"+t).value;n[e.documentType]=s}})),t=n,0===Object.keys(t).length)u.b.error("Please select documents first");else{var a=0;"minutes"==o?a=60*s:"hours"==o?a=3600*s:"days"==o&&(a=86400*s);var r=parseInt((new Date).getTime()/1e3)+a;console.log(JSON.stringify(n)),e.approverequest(e.accessrequestdata,JSON.stringify(n),r),e.onhide()}};return Object(j.jsx)(H.a,{show:e.modalshow,onHide:e.onhide,className:"popup-lg",children:Object(j.jsx)(H.a.Body,{style:{padding:"0px"},children:Object(j.jsxs)("div",{className:"popup-box",children:[Object(j.jsx)("div",{className:"closed",children:Object(j.jsx)("a",{style:{border:"none"},onClick:e.onhide,children:Object(j.jsx)("span",{style:{fontSize:"25px"},children:"\xd7"})})}),Object(j.jsxs)("div",{className:"popup-data",children:[Object(j.jsx)("div",{className:"popup-header",children:Object(j.jsx)("h3",{children:"Select Documents"})}),Object(j.jsx)("div",{className:"popup-body",children:Object(j.jsxs)(v.a,{children:[Object(j.jsx)("p",{children:"Select documents to share with proper access type"}),Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Document Type"}),Object(j.jsx)("th",{children:"Select"}),Object(j.jsx)("th",{children:"Access type"})]})}),Object(j.jsx)("tbody",{children:e.documentsdata.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsxs)("td",{children:[null===e||void 0===e?void 0:e.documentType,"true"==(null===e||void 0===e?void 0:e.isVerified)?Object(j.jsx)("i",{class:"fa fa-check-circle","aria-hidden":"true",style:{color:"blue"}}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsx)("td",{className:"text-align-center",children:Object(j.jsx)("input",{type:"checkbox",id:"select"+t,name:"selected",value:"select"})}),Object(j.jsxs)("td",{children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"radio",id:"view"+t,name:"accessType"+t,value:"View",defaultChecked:!0}),"View"]})," \u2002",Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"radio",id:"download"+t,name:"accessType"+t,value:"Download"}),"Download"]})]})]},t)}))})]}),Object(j.jsx)(v.a,{className:"text-align-center select-duration",children:Object(j.jsxs)(w.a,{md:12,children:[Object(j.jsxs)("select",{name:"durationCount",id:"durationCount",defaultValue:s,onChange:function(e){return r(e.target.value)},children:["minutes"==o?Object(j.jsx)(j.Fragment,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("option",{value:"1",children:"1"}),Object(j.jsx)("option",{value:"2",children:"2"}),Object(j.jsx)("option",{value:"3",children:"3"}),Object(j.jsx)("option",{value:"4",children:"4"})]}),Object(j.jsx)("option",{value:"5",children:"5"}),Object(j.jsx)("option",{value:"6",children:"6"}),Object(j.jsx)("option",{value:"7",children:"7"}),Object(j.jsx)("option",{value:"8",children:"8"}),Object(j.jsx)("option",{value:"9",children:"9"}),Object(j.jsx)("option",{value:"10",children:"10"}),Object(j.jsx)("option",{value:"11",children:"11"}),Object(j.jsx)("option",{value:"12",children:"12"}),Object(j.jsx)("option",{value:"13",children:"13"}),Object(j.jsx)("option",{value:"14",children:"14"}),Object(j.jsx)("option",{value:"15",children:"15"}),Object(j.jsx)("option",{value:"16",children:"16"}),Object(j.jsx)("option",{value:"17",children:"17"}),Object(j.jsx)("option",{value:"18",children:"18"}),Object(j.jsx)("option",{value:"19",children:"19"}),Object(j.jsx)("option",{value:"20",children:"20"}),Object(j.jsx)("option",{value:"21",children:"21"}),Object(j.jsx)("option",{value:"22",children:"22"}),Object(j.jsx)("option",{value:"23",children:"23"}),Object(j.jsx)("option",{value:"24",children:"24"}),Object(j.jsx)("option",{value:"25",children:"25"}),Object(j.jsx)("option",{value:"26",children:"26"}),Object(j.jsx)("option",{value:"27",children:"27"}),Object(j.jsx)("option",{value:"28",children:"28"}),Object(j.jsx)("option",{value:"29",children:"29"}),Object(j.jsx)("option",{value:"30",children:"30"})]}),Object(j.jsxs)("select",{name:"durationType",id:"durationType",defaultValue:o,onChange:function(e){return d(e.target.value)},children:[Object(j.jsx)("option",{value:"minutes",children:"Minutes"}),Object(j.jsx)("option",{value:"hours",children:"Hours"}),Object(j.jsx)("option",{value:"days",children:"Days"})]})]})}),Object(j.jsx)(N.a,{onClick:function(){return p()},children:"Submit"})]})}),Object(j.jsx)("div",{className:"footer-popup"})]})]})})})},J=n(134);n(679);J.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(J.c.version,"/pdf.worker.js");var X=function(e){var t=e.pdf,n=e.setShowDocumentURL,s=Object(a.useState)(null),r=Object(l.a)(s,2),c=r[0],i=r[1],o=Object(a.useState)(1),d=Object(l.a)(o,2),u=d[0],b=d[1];return Object(j.jsxs)("div",{className:"pdf-view-box",children:[Object(j.jsxs)("div",{className:"controls",children:[Object(j.jsx)("button",{onClick:function(){u>1&&b(u-1)},disabled:1===u,children:Object(j.jsx)("i",{class:"fa fa-chevron-left","aria-hidden":"true"})}),"\u2003 ",u,"/",c," \u2003",Object(j.jsx)("button",{onClick:function(){u<c&&b(u+1)},disabled:u===c,children:Object(j.jsx)("i",{class:"fa fa-chevron-right","aria-hidden":"true"})}),Object(j.jsx)("button",{className:"float-right",onClick:function(){return n("")},children:"X"})]}),Object(j.jsx)(J.a,{file:t,onLoadSuccess:function(e){var t=e.numPages;i(t)},onContextMenu:function(e){return e.preventDefault()},className:"pdf-container",children:Object(j.jsx)(J.b,{pageNumber:u})})]})};var Q=function(e){var t=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),a=n.target.password.value,e.saveallobjectdata(a),e.onhide();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(H.a,{show:e.modalshow,onHide:e.onhide,className:"popup-lg",children:Object(j.jsx)(H.a.Body,{style:{padding:"0px"},children:Object(j.jsxs)("div",{className:"popup-box",children:[Object(j.jsx)("div",{className:"closed",children:Object(j.jsx)("a",{style:{border:"none"},onClick:e.onhide,children:Object(j.jsx)("span",{style:{fontSize:"25px"},children:"\xd7"})})}),Object(j.jsxs)("div",{className:"popup-data",children:[Object(j.jsx)("div",{className:"popup-header",children:Object(j.jsx)("h3",{children:"Confirm"})}),Object(j.jsx)("div",{className:"popup-body",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(R.a,{onSubmit:t,children:[Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"password",children:[Object(j.jsx)(R.a.Label,{for:"password",children:"Enter your account password to confirm."}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"password",id:"password",placeholder:"Password",required:!0})]}),Object(j.jsx)(v.a,{children:Object(j.jsx)(N.a,{variant:"primary",type:"submit",disabled:e.loading,children:"Confirm"})})]})})}),Object(j.jsx)("div",{className:"footer-popup",children:Object(j.jsx)("p",{children:"Note: Password should be correct or else your data will not be saved."})})]})]})})})},Z=n(43),$=n.n(Z),ee=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$()({method:"post",url:"https://kyc-api.surepass.io/api/v1/users/username-login",data:{username:"jewria",password:"Jewria@12",role:["user"]},headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.data.data.access_token);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$()({method:"post",url:"https://kyc-api.surepass.io/api/v1/aadhaar-v2/generate-otp",data:{id_number:t},headers:{Authorization:"Bearer "+n,"access-control-allow-origin":"https://dash.surepass.io","access-control-allow-credentials":!0,"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.data.data.client_id);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,n,a){var s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$()({method:"post",url:"https://kyc-api.surepass.io/api/v1/aadhaar-v2/submit-otp",data:{otp:t,client_id:n},headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}});case 2:return s=e.sent,e.abrupt("return",s.data.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ae=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(null),d=Object(l.a)(c,2),p=(d[0],d[1]),m=Object(a.useContext)(b),h=Object(l.a)(m,2),O=h[0],x=(h[1],Object(a.useState)(!1)),f=Object(l.a)(x,2),y=f[0],g=f[1],T=Object(a.useState)(-1),k=Object(l.a)(T,2),C=k[0],A=k[1],D=Object(a.useState)(""),S=Object(l.a)(D,2),I=S[0],L=S[1],M=Object(a.useState)(""),q=Object(l.a)(M,2),F=q[0],_=q[1],U=Object(a.useState)([]),P=Object(l.a)(U,2),K=P[0],Y=P[1];Object(a.useEffect)((function(){-1==C&&(document.getElementById("nameOnDocument").value="",document.getElementById("documentId").value="",document.getElementById("documentFile").value=""),V()}),[C]);var V=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.j)();case 2:t=e.sent,Y(t.data[0].documentTypeList);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var G=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,s,r,c,o,l,d,j,b,p;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setLoading(!0),!(e.myAllDocumentCount>1)){t.next=6;break}return e.setLoading(!1),u.b.error("Only 2 documents are free to upload. Please purchase INRT tokens to add more documents."),t.abrupt("return");case 6:if(!e.documentsData.some((function(e){return e.documentType===("other"==n.target.documentType.value?n.target.documentTypeText.value:n.target.documentType.value)}))){t.next=12;break}return e.setLoading(!1),console.log("Please select unique document type"),u.b.error("Please select unique document type"),t.abrupt("return");case 12:if(a=n.target.nameOnDocument.value,s="","adhar"!=n.target.documentType.value){t.next=55;break}if(-1!=C){t.next=38;break}return t.prev=16,t.next=19,ee();case 19:return r=t.sent,L(r),t.next=23,te(n.target.documentId.value,r);case 23:return c=t.sent,_(c),A(0),e.setLoading(!1),t.abrupt("return");case 30:return t.prev=30,t.t0=t.catch(16),console.error(t.t0),t.t0.response.data.data.valid_aadhaar?u.b.error("Adhar document id is invalid"):t.t0.response.data.data.otp_sent?u.b.error("Error while sending OTP"):u.b.error("Error while adhar verification"),e.setLoading(!1),t.abrupt("return");case 36:t.next=55;break;case 38:if(0!=C){t.next=55;break}return t.prev=39,t.next=42,ne(n.target.otp.value,F,I);case 42:o=t.sent,console.log(o),a=o.full_name,l={aadhaarNumber:o.aadhaar_number,fullName:o.full_name,gender:o.gender,hasImage:o.has_image,careOf:o.care_of,address:o.address,zip:o.zip},s=JSON.stringify(l),t.next=55;break;case 49:return t.prev=49,t.t1=t.catch(39),console.error(t.t1),u.b.error("OTP verification failed"),e.setLoading(!1),t.abrupt("return");case 55:return d={nameOnDocument:a,documentId:n.target.documentId.value,documentType:"other"==n.target.documentType.value?n.target.documentTypeText.value:n.target.documentType.value,document:n.target.documentFile.files[0],status:"active",isVerified:0==C,verifiedDocumentDetails:s},console.log(d,O.accessToken),t.next=59,Object(E.b)(d,O.accessToken);case 59:if(j=t.sent,console.log(j),!j.success){t.next=72;break}return t.next=64,Object(E.f)(O.accessToken);case 64:b=t.sent,console.log(b),b.success&&(p=b.data.filter((function(e){return"active"==e.status})),e.setDocumentsData(p)),A(-1),_(""),L(""),t.next=73;break;case 72:u.b.error("Error while saving document data");case 73:e.setLoading(!1);case 74:case"end":return t.stop()}}),t,null,[[16,30],[39,49]])})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,s,r,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),a=B(e.documentsData[0].user_id),t.prev=2,t.next=5,O.KYCContract.methods.updateCustomerData(O.username,a,n).send({from:O.walletAddress});case 5:s=t.sent,console.log(s),s?u.b.success("All data updated!"):(u.b.error("Error while updateing Data"),console.error("Error while  updateing Data")),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(2),r=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),c=r.substr(0,r.indexOf('"')),u.b.error(c),console.log(t.t0.message);case 16:e.setLoading(!1);case 17:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n,a){var s,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,Object(E.d)(a,O.accessToken);case 3:return s=t.sent,console.log(s),s.success?u.b.success("Document deleted sucessfully"):u.b.error("Error while deleting document"),t.next=8,Object(E.f)(O.accessToken);case 8:s=t.sent,console.log(s),s.success&&(e.setMyAllDocumentCount(s.data.length),r=s.data.filter((function(e){return"active"==e.status})),e.setDocumentsData(r)),e.setLoading(!1);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(Q,{modalshow:y,onhide:function(){return g(!1)},saveallobjectdata:H})}),Object(j.jsx)(v.a,{children:Object(j.jsx)("div",{className:"page-heading",children:Object(j.jsx)("h2",{children:" Add New Record"})})}),Object(j.jsxs)(v.a,{style:{padding:"10px"},children:[Object(j.jsx)("label",{className:"text-align-center color-red",children:"(Click on this button to save all changes)"}),Object(j.jsx)(N.a,{onClick:function(){return g(!0)},children:"Update All Data"})]}),e.documentsData.length>0?Object(j.jsx)("div",{className:"add-table",children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Document Type"}),Object(j.jsx)("th",{children:"Name on Document"}),Object(j.jsx)("th",{children:"Document ID"}),Object(j.jsx)("th",{children:"File Url"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:e.documentsData.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsxs)("td",{children:[null===e||void 0===e?void 0:e.documentType,"true"==(null===e||void 0===e?void 0:e.isVerified)?Object(j.jsx)("i",{class:"fa fa-check-circle","aria-hidden":"true",style:{color:"blue"}}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsx)("td",{style:{wordBreak:"break-all"},children:null===e||void 0===e?void 0:e.nameOnDocument}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.documentId}),Object(j.jsx)("td",{style:{wordBreak:"break-all"},children:null===e||void 0===e?void 0:e.fileUrl}),Object(j.jsx)("td",{children:Object(j.jsx)(N.a,{variant:"danger",onClick:function(){return W(t,e.id)},children:Object(j.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})})]},t)}))})]})}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("div",{className:"title-heading",children:Object(j.jsx)("h4",{children:"Add Document"})}),Object(j.jsxs)("div",{className:"add-new-access-form",children:[Object(j.jsxs)(R.a,{className:"deal-form",onSubmit:G,children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"formDocumentType",children:[Object(j.jsx)(R.a.Label,{controlId:"documentType",children:"Select Document type"}),Object(j.jsx)("span",{className:"color-red",children:"*"}),Object(j.jsx)("br",{}),Object(j.jsx)(R.a.Text,{className:"text-muted",children:"Must be unique for each document"})]})}),Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"formDocumentType",children:[Object(j.jsxs)(R.a.Select,{id:"documentType",onChange:function(e){"other"==e.target.value?r(!0):s&&r(!1)},disabled:0==C,required:!0,children:[Object(j.jsx)("option",{value:"",children:"-"}),K.map((function(e,t){return Object(j.jsx)("option",{value:e.value,children:e.text},t)}))]}),s?Object(j.jsx)(R.a.Control,{type:"text",id:"documentTypeText",className:"input-design",placeholder:"",required:!0}):Object(j.jsx)(j.Fragment,{})]})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"formNameOnDocument",children:[Object(j.jsx)(R.a.Label,{controlId:"nameOnDocument",children:"Your Name"}),Object(j.jsx)("span",{className:"color-red",children:"*"}),Object(j.jsx)("br",{}),Object(j.jsx)(R.a.Text,{className:"text-muted",controlId:"nameOnDocument",children:"As per written on document"})]})}),Object(j.jsx)(w.a,{md:"6",children:Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"formNameOnDocument",children:Object(j.jsx)(R.a.Control,{type:"text",id:"nameOnDocument",className:"input-design",placeholder:"",disabled:0==C,required:!0})})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"formDocumentId",children:[Object(j.jsx)(R.a.Label,{controlId:"documentId",children:"Document ID"}),Object(j.jsx)("span",{className:"color-red",children:"*"})]})}),Object(j.jsx)(w.a,{md:"6",children:Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"formDocumentId",children:Object(j.jsx)(R.a.Control,{type:"text",id:"documentId",className:"input-design",placeholder:"",disabled:0==C,required:!0})})})]}),Object(j.jsx)("br",{}),Object(j.jsx)(v.a,{children:Object(j.jsx)(w.a,{md:9,className:"offset-3",children:Object(j.jsx)(R.a.Group,{className:"mb-3  input-form",controlId:"formDocumentFile",children:Object(j.jsx)(R.a.Control,{type:"file",id:"documentFile",className:"input-design",onChange:function(e){if(e.target.files[0]){e.preventDefault();var t=new FileReader;t.readAsArrayBuffer(e.target.files[0]),t.addEventListener("load",(function(){p(t.result)}))}},accept:".pdf",placeholder:"",disabled:0==C,required:!0})})})}),Object(j.jsx)("br",{}),0==C?Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"fromOTP",children:[Object(j.jsx)(R.a.Label,{children:"OTP"}),Object(j.jsx)("br",{}),Object(j.jsx)(R.a.Text,{className:"text-muted",children:"Check your registered Document"})]})}),Object(j.jsx)(w.a,{md:"6",children:Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"fromOTP",children:Object(j.jsx)(R.a.Control,{type:"text",id:"otp",className:"input-design",placeholder:"",required:!0})})})]}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("br",{}),Object(j.jsx)(v.a,{children:Object(j.jsx)(w.a,{md:9,className:"offset-3",children:Object(j.jsx)(R.a.Group,{controlId:"formSubmit",children:Object(j.jsx)(N.a,{variant:"dark",type:"submit",children:"SUBMIT"})})})})]}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]})]})},se=function(e){Object(h.g)();var t=Object(a.useContext)(b),n=Object(l.a)(t,2),s=n[0],r=(n[1],Object(a.useState)([])),c=Object(l.a)(r,2),d=c[0],p=c[1],m=Object(a.useState)(0),O=Object(l.a)(m,2),x=O[0],f=O[1],y=Object(a.useState)(""),g=Object(l.a)(y,2),T=g[0],k=g[1],C=Object(a.useState)("dashboard"),A=Object(l.a)(C,2),D=A[0],I=A[1],L=Object(a.useState)(0),M=Object(l.a)(L,2),R=M[0],q=M[1],F=Object(a.useState)(0),_=Object(l.a)(F,2),U=_[0],P=_[1],K=Object(a.useState)("requested"),H=Object(l.a)(K,2),J=H[0],X=H[1],Q=Object(a.useState)([]),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1],te=Object(a.useState)({}),ne=Object(l.a)(te,2),se=ne[0],re=ne[1],ce=Object(a.useState)([]),ie=Object(l.a)(ce,2),oe=ie[0],le=ie[1],de=Object(a.useState)(!1),ue=Object(l.a)(de,2),je=ue[0],be=ue[1];Object(a.useEffect)((function(){return he(),Oe(),pe(),function(){p([])}}),[]);var pe=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,Object(E.f)(s.accessToken);case 3:n=t.sent,console.log(n),n.success&&(f(n.data.length),a=n.data.filter((function(e){return"active"==e.status})),p(a)),e.setLoading(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),me=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.e)(t);case 2:n=e.sent,k(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a,r,c,o,l,d,u;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,s.KYCContract.methods.getAllMyCustomersRequestsLength(s.username).call({from:s.walletAddress});case 3:n=t.sent,a=[],r=0,c=0,o=0;case 8:if(!(o<n)){t.next=23;break}return t.next=11,s.KYCContract.methods.getAllMyCustomersRequestsData(s.username,o).call({from:s.walletAddress});case 11:return l=t.sent,console.log(l),t.next=15,s.KYCContract.methods.getAllRequestsData(l,s.username).call({from:s.walletAddress});case 15:d=t.sent,console.log(d),1==d.status?r++:2==d.status&&parseInt((new Date).getTime()/1e3)<d.closeTime&&c++,u={merchantName:l,info:d.info,status:d.status,timestamp:d.timestamp,openTime:d.openTime,closeTime:d.closeTime,documentsAllowed:d.documentsAllowed},a.push(u);case 20:o++,t.next=8;break;case 23:q(r),P(c),ee(a),e.setLoading(!1);case 27:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Oe=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a,r,c,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,s.KYCContract.methods.getAllMyAccessHistoryLength(s.username).call({from:s.walletAddress});case 3:n=t.sent,a=[],r=0;case 6:if(!(r<n)){t.next=16;break}return t.next=9,s.KYCContract.methods.getMyAccessHistoryData(s.username,r).call({from:s.walletAddress});case 9:c=t.sent,console.log(c),o={merchantName:c.fromUsername,info:c.info,fromTimestamp:c.fromTimestamp,toTimestamp:c.toTimestamp},a.push(o);case 13:r++,t.next=6;break;case 16:le(a),console.log(a),e.setLoading(!1);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),xe=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n,a,r){var c,o,l,d;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),c=B(a),t.prev=2,t.next=5,s.KYCContract.methods.approveRequest(n.merchantName,s.username,c,r).send({from:s.walletAddress});case 5:o=t.sent,console.log(o),o?(u.b.success("Request approved successfully!"),he(),Oe()):(u.b.error("Error while approving Request"),console.error("Error while approving Request")),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(2),l=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),d=l.substr(0,l.indexOf('"')),u.b.error(d),console.log(t.t0.message);case 16:e.setLoading(!1);case 17:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n,a){return t.apply(this,arguments)}}(),fe=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,r,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.prev=1,t.next=4,s.KYCContract.methods.rejectRequest(n.merchantName,s.username).send({from:s.walletAddress});case 4:a=t.sent,console.log(a),a?(he(),Oe(),u.b.success("Request rejected successfully!")):(u.b.error("Error while rejecting Request"),console.error("Error while rejecting Request")),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),r=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),c=r.substr(0,r.indexOf('"')),u.b.error(c),console.log(t.t0.message);case 15:e.setLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),ye=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,r,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.prev=1,t.next=4,s.KYCContract.methods.closeAccess(n.merchantName,s.username).send({from:s.walletAddress});case 4:a=t.sent,console.log(a),a?(he(),Oe(),u.b.success("Access closed successfully!")):(u.b.error("Error while rejecting Request"),console.error("Error while rejecting Request")),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),r=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),c=r.substr(0,r.indexOf('"')),u.b.error(c),console.log(t.t0.message);case 15:e.setLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),ge=function(e){var t="";return Object.keys(e).forEach((function(n,a){t+=n+" : "+e[n]})),t};return s.isConnected?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"checkbox",id:"side",name:"",value:""}),Object(j.jsxs)("div",{className:"main-data-row page-wrap",children:[Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(W,{modalshow:je,onhide:function(){return be(!1)},documentsdata:d,accessrequestdata:se,approverequest:xe})}),Object(j.jsx)("div",{className:"side-bar-menu sidebar",children:Object(j.jsxs)("div",{className:"homepage-navigation ",children:[Object(j.jsxs)("div",{className:"menu-user",children:[Object(j.jsx)("div",{className:"user-img",children:Object(j.jsx)("img",{src:S})}),Object(j.jsx)("p",{children:"Customer"})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"dashboard"==D?"active":"",onClick:function(){return I("dashboard")},children:[Object(j.jsx)("i",{className:"fa fa-tachometer","aria-hidden":"true"})," Dashboard"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"mydocuments"==D?"active":"",onClick:function(){return I("mydocuments")},children:[Object(j.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," My Documents"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"allaccessrequest"==D?"active":"",onClick:function(){return I("allaccessrequest")},children:[Object(j.jsx)("i",{className:"fa fa-key","aria-hidden":"true"})," All Access Request"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"accesshistory"==D?"active":"",onClick:function(){return I("accesshistory")},children:[Object(j.jsx)("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})," Access History"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"addnewrecord"==D?"active":"",onClick:function(){return I("addnewrecord")},children:[Object(j.jsx)("i",{className:"fa fa-plus-square-o","aria-hidden":"true"})," Add New Record"]})})]})]})}),Object(j.jsxs)("div",{className:"dashboard-content page-content",children:[Object(j.jsx)("label",{for:"side",class:"toggle",children:"\u2630"}),Object(j.jsxs)(v.a,{className:"homepage-pageData",children:["dashboard"==D?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" Welcome to KYC!"}),Object(j.jsx)("span",{children:" An KYC authentication using blockchain."}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)(v.a,{children:Object(j.jsxs)(v.a,{className:"dashboard-summary-details",children:[Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",onClick:function(){return I("mydocuments")},children:["My Documents ",Object(j.jsx)(Y.a,{bg:"secondary",children:d.length}),Object(j.jsxs)("span",{className:"visually-hidden",children:["My Documents ",d.length]})]})}),Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",onClick:function(){I("allaccessrequest"),X("requested")},children:["Pending Requests ",Object(j.jsx)(Y.a,{bg:"secondary",children:R}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Pending Requests ",R]})]})}),Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",onClick:function(){I("allaccessrequest"),X("approved")},children:["Access Allowed ",Object(j.jsx)(Y.a,{bg:"secondary",children:U}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Allowed Requests ",U]})]})})]})})]}):Object(j.jsx)(j.Fragment,{}),"mydocuments"==D?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" My Documents"}),Object(j.jsx)("span",{children:" All your uploaded doucments"})]}),Object(j.jsx)(v.a,{children:d.length>0?Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Document Type"}),Object(j.jsx)("th",{children:"Name on Document"}),Object(j.jsx)("th",{children:"Document ID"}),Object(j.jsx)("th",{children:"File Url Hash"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:d.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsxs)("td",{children:[e.documentType," ","true"==e.isVerified?Object(j.jsx)("i",{class:"fa fa-check-circle","aria-hidden":"true",style:{color:"blue"}}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsx)("td",{style:{wordBreak:"break-all"},children:e.nameOnDocument}),Object(j.jsx)("td",{children:e.documentId}),Object(j.jsx)("td",{style:{wordBreak:"break-all"},children:B(e.fileUrl)}),Object(j.jsx)("td",{children:Object(j.jsx)(N.a,{onClick:function(){return me(e.fileUrl)},children:"Show"})})]},t)}))})]}):Object(j.jsx)("span",{className:"color-red",children:"No data found"})}),T||""!=T?Object(j.jsxs)(v.a,{children:[Object(j.jsx)(N.a,{variant:"dark",onClick:function(){return k("")},children:"Close View"}),Object(j.jsx)("embed",{src:T,width:"100%",height:"500px"})]}):Object(j.jsx)(j.Fragment,{})]}):Object(j.jsx)(j.Fragment,{}),"allaccessrequest"==D?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"page-heading",children:Object(j.jsx)("h2",{children:" All Access Request"})}),Object(j.jsxs)(V.a,{id:"AllAccessRequestTab",className:"mb-3",activeKey:J,onSelect:function(e){return X(e)},children:[Object(j.jsx)(G.a,{eventKey:"requested",title:"Requested",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Documents Allowed"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send On"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:$.map((function(e,t){return 1==e.status?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.merchantName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:ge(JSON.parse(e.documentsAllowed))}),Object(j.jsx)("td",{children:"Requested"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsxs)("td",{children:[Object(j.jsx)(N.a,{onClick:function(){re(e),be(!0)},children:" Approve "}),Object(j.jsx)(N.a,{variant:"danger",onClick:function(){return fe(e)},children:" Reject "})]})]},t):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"approved",title:"Approved",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:$.map((function(e,t){return 2==e.status&&parseInt((new Date).getTime()/1e3)<e.closeTime?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.merchantName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Approved"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()}),Object(j.jsx)("td",{children:parseInt((new Date).getTime()/1e3)<e.closeTime?Object(j.jsx)(N.a,{variant:"danger",onClick:function(){return ye(e)},children:" Close Access Now "}):Object(j.jsx)(j.Fragment,{})})]},t):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"rejected",title:"Rejected",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:$.map((function(e,t){return-1==e.status?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.merchantName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Rejected"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()})]},t):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"closed",title:"Closed",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:$.map((function(e,t){return 3==e.status||parseInt((new Date).getTime()/1e3)>e.closeTime?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.merchantName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Closed"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()})]},t):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"all",title:"All",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:$.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.merchantName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:1==e.status?"Requested":2==e.status?"Approved":-1==e.status?"Rejected":"Closed"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()}),Object(j.jsx)("td",{children:1==e.status?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N.a,{onClick:function(){re(e),be(!0)},children:" Approve "}),Object(j.jsx)(N.a,{variant:"danger",onClick:function(){return fe(e)},children:" Reject "})]}):2==e.status&&parseInt((new Date).getTime()/1e3)<e.closeTime?Object(j.jsx)(N.a,{variant:"danger",onClick:function(){return ye(e)},children:" Close Access Now "}):Object(j.jsx)(j.Fragment,{})})]},t)}))})]})})})]})]}):Object(j.jsx)(j.Fragment,{}),"accesshistory"==D?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" Access History"}),Object(j.jsx)("span",{children:" All details of merchants who has access to your document with access time duration."}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)(v.a,{children:oe.length>0?Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"From"}),Object(j.jsx)("th",{children:"To"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:oe.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.merchantName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.fromTimestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.toTimestamp?"-":new Date(parseInt(1e3*e.toTimestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.toTimestamp&&parseInt((new Date).getTime()/1e3)<e.closeTime?Object(j.jsx)(N.a,{variant:"danger",onClick:function(){return ye(e)},children:" Close Access Now "}):Object(j.jsx)(j.Fragment,{})})]},t)}))})]}):Object(j.jsx)("span",{className:"color-red",children:"No data found"})})]}):Object(j.jsx)(j.Fragment,{}),"addnewrecord"==D?Object(j.jsx)(ae,{documentsData:d,setDocumentsData:p,myAllDocumentCount:x,setMyAllDocumentCount:f,setLoading:e.setLoading,loading:e.loading}):Object(j.jsx)(j.Fragment,{})]})]})]})]}):Object(j.jsx)(h.a,{to:"/"})};var re=function(e){var t=Object(a.useContext)(b),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),p=d[0],m=d[1],O=Object(a.useState)(0),f=Object(l.a)(O,2),y=f[0],g=f[1],v=Object(h.g)();function w(){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window||"undefined"===typeof window.web3){e.next=37;break}return t=new C.a(window.web3.currentProvider),e.next=4,t.eth.net.getId();case 4:s=e.sent,"",console.log(s),e.t0=s,e.next=97===e.t0?10:13;break;case 10:return"BSC",console.log("Network is BSC mainnet"),e.abrupt("break",16);case 13:return u.b.error("Please select mainnet first"),console.error("Please select mainnet first"),e.abrupt("return");case 16:return t.eth.net.getNetworkType().then(console.log),e.prev=17,e.next=20,window.ethereum.request({method:"eth_requestAccounts"});case 20:c=e.sent,e.next=27;break;case 23:return e.prev=23,e.t1=e.catch(17),4001===e.t1.code&&console.error("Please allow metamask to connect"),e.abrupt("return");case 27:if(console.log(c),!(c.length<1)){e.next=31;break}return console.error("Please unlock metamask wallet first!"),e.abrupt("return");case 31:console.log(c[0]),n=new t.eth.Contract(D,A),a=new t.eth.Contract(F,q),r({walletAddress:c[0],isConnected:!0,username:"",web3:t,role:null,KYCContract:n,INRTContract:a}),e.next=38;break;case 37:console.error("Metamask wallet not found! Please make sure wallet is installed and running!");case 38:case"end":return e.stop()}}),e,null,[[17,23]])})))).apply(this,arguments)}Object(a.useEffect)((function(){if(localStorage.getItem("rememberMe")){var e=localStorage.getItem("merchant_username");m(e)}window.ethereum&&(window.ethereum.on("chainChanged",(function(){window.location.reload()})),window.ethereum.on("accountsChanged",(function(e){w()})),w())}),[]);var k=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,c,o,l,d,j,b;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setLoading(!0),n.preventDefault(),a={username:n.target.username.value,password:n.target.password.value},localStorage.setItem("rememberMe",n.target.rememberMe.checked),localStorage.setItem("merchant_username",p),0!=y){t.next=35;break}return 0==s.connect&&w(),t.prev=7,t.next=10,s.KYCContract.methods.merchantLogin(a.username,a.password).call({from:s.walletAddress});case 10:if(c=t.sent,console.log(c),!c[0]){t.next=25;break}return t.prev=13,t.next=16,Object(E.l)(a.username,a.password);case 16:o=t.sent,console.log(o),o.success?(r(Object(M.a)(Object(M.a)({},s),{username:a.username,role:o.response.user.role,accessToken:o.response.accessToken})),v.push("/merchant/home")):u.b.error("Error while login call"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(13),u.b.error(t.t0.message),console.log(t.t0.message);case 25:t.next=33;break;case 27:t.prev=27,t.t1=t.catch(7),l=t.t1.message.substr(t.t1.message.indexOf('"message": "')+12),d=l.substr(0,l.indexOf('"')),u.b.error(d),console.log(t.t1.message);case 33:t.next=59;break;case 35:if(0!=s.connect){t.next=38;break}return u.b.error("Please connect metamask first"),t.abrupt("return");case 38:return t.prev=38,t.next=41,s.KYCContract.methods.createMerchant(a.username,a.password).send({from:s.walletAddress});case 41:if(j=t.sent,console.log(j),!j){t.next=52;break}return c=j.events.MerchantAdded.returnValues,t.next=47,Object(E.c)(a.username,a.password,s.walletAddress);case 47:b=t.sent,console.log(b),b.success?u.b.success("Account created successfully!"):u.b.error("Error while create account call"),t.next=54;break;case 52:u.b.error("Error while creating account"),console.error("Error while creating account");case 54:t.next=59;break;case 56:t.prev=56,t.t2=t.catch(38),console.log(t.t2.message);case 59:e.setLoading(!1);case 60:case"end":return t.stop()}}),t,null,[[7,27],[13,21],[38,56]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(x.a,{children:[Object(j.jsxs)("div",{className:"login-page",children:[Object(j.jsx)("div",{className:"home-heading",children:Object(j.jsxs)("h2",{children:[" ",0==y?"Merchant Login":"Merchant Sign Up"]})}),Object(j.jsxs)(R.a,{onSubmit:k,children:[Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"username",children:[Object(j.jsxs)(R.a.Label,{for:"username",children:["Username",Object(j.jsx)("span",{className:"color-red",children:"*"})]}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"username",id:"username",placeholder:"Enter Username",value:p,onChange:function(e){m(e.target.value)},required:!0})]}),Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"password",children:[Object(j.jsxs)(R.a.Label,{for:"password",children:["Password",Object(j.jsx)("span",{className:"color-red",children:"*"})]}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"password",id:"password",placeholder:"Password",required:!0})]}),Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"rememberMe",children:Object(j.jsx)(R.a.Check,{type:"checkbox",id:"rememberMe",label:"Remember me "})}),Object(j.jsx)("div",{className:"btn-row",children:Object(j.jsx)(N.a,{variant:"primary",type:"submit",disabled:e.loading,children:0==y?"Login":"Sign Up"})}),Object(j.jsx)("div",{className:"login-sp-text",children:0==y?Object(j.jsxs)("p",{className:"nt-member text-align-right",children:["Not a Merchant? ",Object(j.jsx)("a",{href:"#",onClick:function(){return g(1)},children:"Sign up now"})]}):Object(j.jsxs)("p",{className:"nt-member text-align-right",children:["already a Merchant? ",Object(j.jsx)("a",{href:"#",onClick:function(){return g(0)},children:"Login now"})]})})]})]}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]})})},ce=function(e){Object(h.g)();var t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),p=d[0],m=d[1],O=Object(a.useState)({}),x=Object(l.a)(O,2),f=x[0],y=x[1],g=Object(a.useState)([]),T=Object(l.a)(g,2),k=T[0],C=T[1],D=Object(a.useState)("dashboard"),S=Object(l.a)(D,2),L=S[0],M=S[1],q=Object(a.useContext)(b),F=Object(l.a)(q,2),_=F[0],U=(F[1],Object(a.useState)(0)),K=Object(l.a)(U,2),H=K[0],W=K[1],J=Object(a.useState)(0),Q=Object(l.a)(J,2),Z=Q[0],$=Q[1],ee=Object(a.useState)(0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],se=Object(a.useState)("requested"),re=Object(l.a)(se,2),ce=re[0],ie=re[1],oe=Object(a.useState)([]),le=Object(l.a)(oe,2),de=le[0],ue=le[1],je=Object(a.useState)([]),be=Object(l.a)(je,2),pe=be[0],me=be[1],he=Object(a.useState)([]),Oe=Object(l.a)(he,2),xe=Oe[0],fe=Oe[1];Object(a.useEffect)((function(){ve(),ye()}),[]);var ye=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.KYCContract.methods.merchantReferralRewardCount(_.username).call({from:_.walletAddress});case 2:t=e.sent,ae(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setLoading(!0),!(ne>0)){t.next=24;break}return t.prev=2,t.next=5,_.KYCContract.methods.claimMerchantReferralReward(_.username).send({from:_.walletAddress});case 5:if(n=t.sent,console.log(n),!n){t.next=16;break}return u.b.success("Referral Reward Claimed"),t.next=11,ye();case 11:return t.next=13,_.INRTContract.methods.balanceOf(_.walletAddress).call();case 13:a=t.sent,console.log(a),e.tokenCount!=a&&e.setTokenCount(a/Math.pow(10,6));case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),u.b.error("Error while claiming reward"),console.log(t.t0.message);case 22:t.next=25;break;case 24:u.b.error("You don't have any referrals");case 25:e.setLoading(!1);case 26:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(){return t.apply(this,arguments)}}(),ve=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a,s,r,c,o,l,d,u;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,_.KYCContract.methods.getAllMyMerchantsRequestsLength(_.username).call({from:_.walletAddress});case 3:n=t.sent,a=[],s=[],r=0,c=0,o=0;case 9:if(!(o<n)){t.next=24;break}return t.next=12,_.KYCContract.methods.getAllMyMerchantsRequestsData(_.username,o).call({from:_.walletAddress});case 12:return l=t.sent,console.log(l),t.next=16,_.KYCContract.methods.getAllRequestsData(_.username,l).call({from:_.walletAddress});case 16:d=t.sent,console.log(d),1==d.status?r++:2==d.status&&(parseInt((new Date).getTime()/1e3)<d.closeTime&&c++,s.push(l)),u={customerName:l,info:d.info,status:d.status,timestamp:d.timestamp,openTime:d.openTime,closeTime:d.closeTime},a.push(u);case 21:o++,t.next=9;break;case 24:W(r),$(c),ue(a),fe(Array.from(new Set(s))),e.setLoading(!1);case 29:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),we=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,s,r,c,o,l,d;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setLoading(!0),a={name:n.target.name.value},console.log(a),0!=_.connect){t.next=7;break}return u.b.error("Please connect metamask first"),t.abrupt("return");case 7:return t.prev=7,t.next=10,_.KYCContract.methods.checkRequestStatus(_.username,a.name).send({from:_.walletAddress});case 10:return s=t.sent,console.log(s),null!=s.events.RequestStatusChanged&&ve(),t.next=15,_.KYCContract.methods.getUserData(_.username,a.name).call({from:_.walletAddress});case 15:if(!(r=t.sent)){t.next=26;break}return t.next=19,Object(E.h)(P(r[0]));case 19:c=t.sent,C(c.data),o=P(r[1]),y(JSON.parse(o)),u.b.success("Data fetched successfully!"),t.next=28;break;case 26:u.b.error("Error while fetching Request"),console.error("Error while fetching Request");case 28:t.next=36;break;case 30:t.prev=30,t.t0=t.catch(7),l=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),d=l.substr(0,l.indexOf('"')),u.b.error(d),console.log(t.t0.message);case 36:e.setLoading(!1);case 37:case"end":return t.stop()}}),t,null,[[7,30]])})));return function(e){return t.apply(this,arguments)}}(),Te=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.e)(t);case 2:n=e.sent,m(n),"View"==f[t.documentType]?r(!1):r(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.i)(t);case 2:(n=e.sent).success&&(me(n.data),console.log(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ce=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,s,r,c,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setLoading(!0),a={},pe.forEach((function(e,t){if(document.getElementById("select"+t).checked)if(document.getElementById("view"+t).checked){var n=document.getElementById("view"+t).value;a[e]=n}else if(document.getElementById("download"+t).checked){var s=document.getElementById("download"+t).value;a[e]=s}})),console.log(a),i=a,0!==Object.keys(i).length){t.next=9;break}return u.b.error("Please select documents first"),e.setLoading(!1),t.abrupt("return");case 9:if(s={name:n.target.name.value,info:n.target.info.value,documentsAllowed:JSON.stringify(a)},console.log(s),0!=_.connect){t.next=15;break}return e.setLoading(!1),u.b.error("Please connect metamask first"),t.abrupt("return");case 15:return t.prev=15,t.next=18,_.INRTContract.methods.allowance(_.walletAddress,A).call();case 18:if(!(t.sent<1e6)){t.next=23;break}return t.next=22,_.INRTContract.methods.approve(A,1e6).send({from:_.walletAddress});case 22:t.sent;case 23:return t.next=25,_.KYCContract.methods.sendAccessRequest(_.username,s.name,s.documentsAllowed,s.info).send({from:_.walletAddress});case 25:r=t.sent,console.log(r),r?(ve(),u.b.success("Request send successfully!")):(u.b.error("Error while sending Request"),console.error("Error while sending Request")),t.next=36;break;case 30:t.prev=30,t.t0=t.catch(15),c=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),o=c.substr(0,c.indexOf('"')),u.b.error(o),console.log(t.t0.message);case 36:e.setLoading(!1);case 37:case"end":return t.stop()}var i}),t,null,[[15,30]])})));return function(e){return t.apply(this,arguments)}}();return _.isConnected?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"checkbox",id:"side",name:"",value:""}),Object(j.jsxs)("div",{className:"main-data-row  page-wrap",children:[Object(j.jsx)("div",{className:"side-bar-menu sidebar",children:Object(j.jsxs)("div",{className:"homepage-navigation",children:[Object(j.jsxs)("div",{className:"menu-user",children:[Object(j.jsx)("div",{className:"user-img",children:Object(j.jsx)("img",{src:I})}),Object(j.jsx)("p",{children:"Merchant"})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"dashboard"==L?"active":"",onClick:function(){return M("dashboard")},children:[Object(j.jsx)("i",{className:"fa fa-tachometer","aria-hidden":"true"})," Dashboard"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"viewuserdata"==L?"active":"",onClick:function(){return M("viewuserdata")},children:[" ",Object(j.jsx)("i",{className:"fa fa-user","aria-hidden":"true"})," View User Data"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"allaccessrequest"==L?"active":"",onClick:function(){return M("allaccessrequest")},children:[Object(j.jsx)("i",{className:"fa fa-key","aria-hidden":"true"})," All Access Request"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"createnewaccessrequest"==L?"active":"",onClick:function(){M("createnewaccessrequest"),me([])},children:[Object(j.jsx)("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})," Create New Access Request"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"referralReward"==L?"active":"",onClick:function(){return M("referralReward")},children:[Object(j.jsx)("i",{className:"fa fa-gift","aria-hidden":"true"})," Referral Rewards"]})})]})]})})," ",Object(j.jsxs)("div",{className:"dashboard-content page-content",children:[Object(j.jsx)("label",{for:"side",className:"toggle",children:"\u2630"}),Object(j.jsxs)(v.a,{className:"homepage-pageData",children:["dashboard"==L?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" Welcome to KYC!"}),Object(j.jsx)("span",{children:" An KYC authentication using blockchain."}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsxs)(v.a,{className:"dashboard-summary-details",children:[Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",onClick:function(){M("allaccessrequest"),ie("approved")},children:["Access Records Allowed ",Object(j.jsx)(Y.a,{bg:"secondary",children:Z}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Access Records Allowed ",Z]})]})}),Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",onClick:function(){M("allaccessrequest"),ie("requested")},children:["Pending Requests ",Object(j.jsx)(Y.a,{bg:"secondary",children:H}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Pending Requests ",H]})]})}),Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",onClick:function(){M("referralReward")},children:["Referral Token Count ",Object(j.jsx)(Y.a,{bg:"secondary",children:ne}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Referral Token Count ",ne]})]})})]})]}):Object(j.jsx)(j.Fragment,{}),"viewuserdata"==L?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" View User Data"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)("div",{className:"user-form-box",children:Object(j.jsxs)(R.a,{className:"deal-form",onSubmit:we,children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"name",children:[Object(j.jsx)(R.a.Label,{children:"Username"}),Object(j.jsx)("br",{}),Object(j.jsx)(R.a.Text,{className:"text-muted",children:"As per used on this platform"})]})}),Object(j.jsx)(w.a,{md:"6",children:Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"name",children:Object(j.jsx)(R.a.Select,{name:"username",id:"name",children:xe.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e})}))})})})]}),Object(j.jsx)("br",{}),Object(j.jsx)(v.a,{children:Object(j.jsx)(w.a,{className:"submit-btn text-align-center",children:Object(j.jsx)(N.a,{variant:"dark",type:"submit",children:"SUBMIT"})})})]})}),Object(j.jsx)(v.a,{style:{marginTop:"20px"},children:k.length>0?Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Document Type"}),Object(j.jsx)("th",{children:"Name on Document"}),Object(j.jsx)("th",{children:"Document ID"}),Object(j.jsx)("th",{children:"Access Type"}),Object(j.jsx)("th",{children:"File Url Hash"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:k.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.documentType}),Object(j.jsx)("td",{style:{wordBreak:"break-all"},children:e.nameOnDocument}),Object(j.jsx)("td",{children:e.documentId}),Object(j.jsx)("td",{children:f[e.documentType]}),Object(j.jsx)("td",{style:{wordBreak:"break-all"},children:B(e.fileUrl)}),Object(j.jsx)("td",{children:Object(j.jsx)(N.a,{onClick:function(){return Te(e.fileUrl)},children:"Show"})})]},t)}))})]}):Object(j.jsx)(j.Fragment,{})}),p||""!=p?Object(j.jsx)(v.a,{children:s?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N.a,{variant:"dark",onClick:function(){return m("")},children:"Close View"}),Object(j.jsx)("embed",{src:p,width:"100%",height:"500px"})]}):Object(j.jsx)(X,{pdf:p,setShowDocumentURL:m})}):Object(j.jsx)(j.Fragment,{})]}):Object(j.jsx)(j.Fragment,{}),"allaccessrequest"==L?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"page-heading",children:Object(j.jsx)("h2",{children:" All Access Requests"})}),Object(j.jsxs)(V.a,{id:"AllAccessRequestTab",className:"mb-3 tabs-dashboard",activeKey:ce,onSelect:function(e){return ie(e)},children:[Object(j.jsx)(G.a,{eventKey:"requested",title:"Requested",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:de.map((function(e,t){return 1==e.status?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.customerName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Requested"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()})]}):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"approved",title:"Approved",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:de.map((function(e,t){return 2==e.status&&parseInt((new Date).getTime()/1e3)<e.closeTime?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.customerName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Approved"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()})]}):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"rejected",title:"Rejected",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:de.map((function(e,t){return-1==e.status?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.customerName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Rejected"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.closeTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.timestamp)).toLocaleString()})]}):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"closed",title:"Closed",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:de.map((function(e,t){return 3==e.status||parseInt((new Date).getTime()/1e3)>e.closeTime?Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.customerName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:"Closed"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()})]}):Object(j.jsx)(j.Fragment,{})}))})]})})}),Object(j.jsx)(G.a,{eventKey:"all",title:"All",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Merchant Name"}),Object(j.jsx)("th",{children:"Info"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Request Send Timestamp"}),Object(j.jsx)("th",{children:"Access Open Timestamp"}),Object(j.jsx)("th",{children:"Access Close Timestamp"})]})}),Object(j.jsx)("tbody",{children:de.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.customerName}),Object(j.jsx)("td",{children:e.info}),Object(j.jsx)("td",{children:1==e.status?"Requested":2==e.status?"Approved":-1==e.status?"Rejected":"Closed"}),Object(j.jsx)("td",{children:new Date(parseInt(1e3*e.timestamp)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.openTime?"-":new Date(parseInt(1e3*e.openTime)).toLocaleString()}),Object(j.jsx)("td",{children:0==e.closeTime?"-":new Date(parseInt(1e3*e.closeTime)).toLocaleString()})]})}))})]})})})]})]}):Object(j.jsx)(j.Fragment,{}),"createnewaccessrequest"==L?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" Create New Access Request"}),Object(j.jsx)("span",{children:" Note: Make sure the username is correct"})]}),Object(j.jsx)("div",{className:"user-form-box",children:Object(j.jsxs)(R.a,{className:"deal-form",onSubmit:Ce,children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"name",children:[Object(j.jsx)(R.a.Label,{children:"Username"}),Object(j.jsx)("span",{className:"color-red",children:"*"}),Object(j.jsx)(R.a.Text,{className:"text-muted",children:" (As per used on this platform) "}),Object(j.jsx)(R.a.Control,{type:"text",id:"name",className:"input-design",placeholder:"Enter username",onChange:function(e){return ke(e.target.value)},required:!0})]})}),Object(j.jsx)(w.a,{md:"6",children:Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"info",children:[Object(j.jsx)(R.a.Label,{children:"Info"}),Object(j.jsx)(R.a.Text,{className:"text-muted",children:" (max 50 characters) "}),Object(j.jsx)(R.a.Control,{type:"text",id:"info",className:"input-design",placeholder:"optional info",required:!0,maxLength:"50"})]})})]}),pe.length>0?Object(j.jsxs)(v.a,{children:[Object(j.jsxs)("p",{children:["Select documents with proper access type",Object(j.jsx)("span",{className:"color-red",children:"*"})]}),Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Document Type"}),Object(j.jsx)("th",{children:"Select"}),Object(j.jsx)("th",{children:"Access type"})]})}),Object(j.jsx)("tbody",{children:pe.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e}),Object(j.jsx)("td",{className:"text-align-center",children:Object(j.jsx)("input",{type:"checkbox",id:"select"+t,name:"selected",value:"select"})}),Object(j.jsxs)("td",{children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"radio",id:"view"+t,name:"accessType"+t,value:"View",defaultChecked:!0}),"View"]})," \u2002",Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"radio",id:"download"+t,name:"accessType"+t,value:"Download"}),"Download"]})]})]},t)}))})]})]}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("br",{}),Object(j.jsx)(v.a,{children:Object(j.jsx)(w.a,{className:"submit-btn text-align-center",children:Object(j.jsx)(N.a,{variant:"dark",type:"submit",children:"SUBMIT"})})})]})})]}):Object(j.jsx)(j.Fragment,{}),"referralReward"==L?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:"ReferralReward"}),Object(j.jsx)("span",{children:" Note: Make sure the username is correct"})]}),Object(j.jsxs)(w.a,{style:{padding:"20px",backgroundColor:"#e8e8e8",borderRadius:"10px"},children:["Your Referral Token Count: ",ne,Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),ne>0?Object(j.jsx)(N.a,{onClick:function(){return ge()},children:"Claim Referral Tokens"}):Object(j.jsx)(j.Fragment,{})]})]}):Object(j.jsx)(j.Fragment,{})]})]})," "]}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}):Object(j.jsx)(h.a,{to:"/merchant/login"})};var ie=function(e){var t=Object(a.useContext)(b),n=Object(l.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(""),d=Object(l.a)(c,2),p=d[0],m=d[1],O=Object(h.g)();function f(){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(Object(i.a)().mark((function e(){var t,n,a,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window||"undefined"===typeof window.web3){e.next=37;break}return t=new C.a(window.web3.currentProvider),e.next=4,t.eth.net.getId();case 4:s=e.sent,"",console.log(s),e.t0=s,e.next=97===e.t0?10:13;break;case 10:return"BSC",console.log("Network is BSC mainnet"),e.abrupt("break",16);case 13:return u.b.error("Please select mainnet first"),console.error("Please select mainnet first"),e.abrupt("return");case 16:return t.eth.net.getNetworkType().then(console.log),e.prev=17,e.next=20,window.ethereum.request({method:"eth_requestAccounts"});case 20:c=e.sent,e.next=27;break;case 23:return e.prev=23,e.t1=e.catch(17),4001===e.t1.code&&console.error("Please allow metamask to connect"),e.abrupt("return");case 27:if(console.log(c),!(c.length<1)){e.next=31;break}return console.error("Please unlock metamask wallet first!"),e.abrupt("return");case 31:console.log(c[0]),n=new t.eth.Contract(D,A),a=new t.eth.Contract(F,q),r({walletAddress:c[0],isConnected:!0,username:"",web3:t,role:null,KYCContract:n,INRTContract:a}),e.next=38;break;case 37:console.error("Metamask wallet not found! Please make sure wallet is installed and running!");case 38:case"end":return e.stop()}}),e,null,[[17,23]])})))).apply(this,arguments)}Object(a.useEffect)((function(){if(localStorage.getItem("rememberMe")){var t=localStorage.getItem("admin_username");m(t)}return window.ethereum&&(window.ethereum.on("chainChanged",(function(){window.location.reload()})),window.ethereum.on("accountsChanged",(function(e){f()})),f()),function(){e.setLoading(!1)}}),[]);var g=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,c,o;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setLoading(!0),a={username:n.target.username.value,password:n.target.password.value},localStorage.setItem("rememberMe",n.target.rememberMe.checked),localStorage.setItem("admin_username",p),null!=s.KYCContract){t.next=9;break}f(),t.next=17;break;case 9:return t.next=11,s.KYCContract.methods.owner().call();case 11:if(c=t.sent,console.log(c.toLowerCase()),s.walletAddress==c.toLowerCase()){t.next=17;break}return u.b.error("Admin wallet Address is incorrect"),e.setLoading(!1),t.abrupt("return");case 17:return t.prev=17,t.next=20,Object(E.l)(a.username,a.password);case 20:o=t.sent,console.log(o),o.success?"1"==o.response.user[0].role?(r(Object(M.a)(Object(M.a)({},s),{username:a.username,role:o.response.user.role,accessToken:o.response.accessToken})),O.push("/admin/home")):u.b.error("You are not admin"):u.b.error("Error while login call"),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(17),u.b.error(t.t0.message),console.log(t.t0.message);case 29:e.setLoading(!1);case 30:case"end":return t.stop()}}),t,null,[[17,25]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(x.a,{children:Object(j.jsxs)("div",{className:"login-page",children:[Object(j.jsx)("div",{className:"home-heading",children:Object(j.jsx)("h2",{children:" Login"})}),Object(j.jsxs)(R.a,{onSubmit:g,children:[Object(j.jsxs)(R.a.Group,{className:"mb-3 input-form",controlId:"formUsername",children:[Object(j.jsx)(R.a.Label,{children:"Username"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"username",id:"username",placeholder:"Enter Username",value:p,onChange:function(e){m(e.target.value)},required:!0})]}),Object(j.jsxs)(R.a.Group,{className:"mb-3 input-form",controlId:"formPassword",children:[Object(j.jsx)(R.a.Label,{children:"Password"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"password",id:"password",placeholder:"Password",required:!0})]}),Object(j.jsx)(R.a.Group,{className:"mb-3",controlId:"formRememberMe",children:Object(j.jsx)(R.a.Check,{type:"checkbox",id:"rememberMe",label:"Remember me "})}),Object(j.jsx)("div",{className:"btn-row",children:Object(j.jsx)(N.a,{variant:"primary",type:"submit",disabled:e.loading,children:"Login"})})]})]})})})},oe=n(52);var le=function(e){Object(a.useEffect)((function(){null!=e.editDocumentType&&e.editDocumentType[2]&&(document.getElementById("text").value=e.editDocumentType[0].text,document.getElementById("value").value=e.editDocumentType[0].value)}),[e.editDocumentType]);var t=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var a,s,r,c;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.value.value,s=n.target.text.value,r=Object(oe.a)(e.allDocumentTypeList),c={text:s,value:a},e.editDocumentType[2]?r[e.editDocumentType[1]]=c:r.push(c),e.setAllDocumentTypeList(r),t.next=9,e.updateWebsiteDataCall(r);case 9:e.onhide();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(H.a,{show:e.modalshow,onHide:e.onhide,className:"popup-lg",children:Object(j.jsx)(H.a.Body,{style:{padding:"0px"},children:Object(j.jsxs)("div",{className:"popup-box",children:[Object(j.jsx)("div",{className:"closed",children:Object(j.jsx)("a",{style:{border:"none"},onClick:e.onhide,children:Object(j.jsx)("span",{style:{fontSize:"25px"},children:"\xd7"})})}),Object(j.jsxs)("div",{className:"popup-data",children:[Object(j.jsx)("div",{className:"popup-header",children:Object(j.jsx)("h3",{children:null!=e.editDocumentType?e.editDocumentType[2]?"Edit Data":"Add Data":""})}),Object(j.jsx)("div",{className:"popup-body",children:Object(j.jsx)(v.a,{children:Object(j.jsxs)(R.a,{onSubmit:t,children:[Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"value",children:[Object(j.jsx)(R.a.Label,{for:"value",children:"Value of document Type.(Camelcase string without spaces.)"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"text",id:"value",placeholder:"value",required:!0})]}),Object(j.jsxs)(R.a.Group,{className:"mb-3",controlId:"text",children:[Object(j.jsx)(R.a.Label,{for:"text",children:"Text of document Type.(User will see this text in dropdown)"}),Object(j.jsx)(R.a.Control,{className:"input-design",type:"text",id:"text",placeholder:"Text",required:!0})]}),Object(j.jsx)(v.a,{children:Object(j.jsx)(N.a,{variant:"primary",type:"submit",disabled:e.loading,children:"Confirm"})})]})})})]})]})})})},de=function(e){Object(h.g)();var t=Object(a.useContext)(b),n=Object(l.a)(t,2),s=n[0],r=(n[1],Object(a.useState)("dashboard")),c=Object(l.a)(r,2),d=c[0],p=c[1],m=Object(a.useState)(0),O=Object(l.a)(m,2),x=O[0],f=O[1],y=Object(a.useState)(0),g=Object(l.a)(y,2),T=g[0],k=g[1],C=Object(a.useState)([]),A=Object(l.a)(C,2),D=A[0],I=A[1],L=Object(a.useState)(null),M=Object(l.a)(L,2),q=M[0],F=M[1],_=Object(a.useState)(0),U=Object(l.a)(_,2),B=U[0],P=U[1],K=Object(a.useState)(0),V=Object(l.a)(K,2),G=V[0],H=V[1],W=Object(a.useState)(0),J=Object(l.a)(W,2),X=J[0],Q=J[1],Z=Object(a.useState)(""),$=Object(l.a)(Z,2),ee=$[0],te=$[1];Object(a.useEffect)((function(){ce(),de(),je(),ae(),ne()}),[]);var ne=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.g)(2);case 2:return t=e.sent,f(t.data),e.next=6,Object(E.g)(3);case 6:e.sent,k(t.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.j)();case 2:t=e.sent,console.log(t),I(t.data[0].documentTypeList),P(t.data[0].noOfDocumentAllowed);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.k)(B,t,s.accessToken);case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.prev=1,t.next=4,s.KYCContract.methods.setBDLTToken(ee).send({from:s.walletAddress});case 4:n=t.sent,console.log(n),n?u.b.success("Request approved successfully!"):(u.b.error("Error while approving Request"),console.error("Error while approving Request")),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),a=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),r=a.substr(0,a.indexOf('"')),u.b.error(r),console.log(t.t0.message);case 15:e.setLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),ce=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,s.KYCContract.methods.getBDLTToken().call({from:s.walletAddress});case 3:n=t.sent,console.log(n),te(n),e.setLoading(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ie=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.prev=1,t.next=4,s.KYCContract.methods.setRequestFees(G).send({from:s.walletAddress});case 4:n=t.sent,console.log(n),n?u.b.success("Request approved successfully!"):(u.b.error("Error while approving Request"),console.error("Error while approving Request")),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),a=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),r=a.substr(0,a.indexOf('"')),u.b.error(r),console.log(t.t0.message);case 15:e.setLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),de=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,s.KYCContract.methods.getRequestFees().call({from:s.walletAddress});case 3:n=t.sent,console.log(n),H(n),e.setLoading(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ue=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n,a,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.prev=1,t.next=4,s.KYCContract.methods.setReferralRewardValue(X).send({from:s.walletAddress});case 4:n=t.sent,console.log(n),n?u.b.success("Request approved successfully!"):(u.b.error("Error while approving Request"),console.error("Error while approving Request")),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),a=t.t0.message.substr(t.t0.message.indexOf('"message": "')+12),r=a.substr(0,a.indexOf('"')),u.b.error(r),console.log(t.t0.message);case 15:e.setLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),je=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,s.KYCContract.methods.getReferralRewardValue().call({from:s.walletAddress});case 3:n=t.sent,console.log(n),Q(n),e.setLoading(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return s.isConnected?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"checkbox",id:"side",name:"",value:""}),Object(j.jsxs)("div",{className:"main-data-row page-wrap",children:[Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(le,{modalshow:null!=q,onhide:function(){return F(null)},editDocumentType:q,allDocumentTypeList:D,setAllDocumentTypeList:I,updateWebsiteDataCall:se})}),Object(j.jsx)("div",{className:"side-bar-menu sidebar",children:Object(j.jsxs)("div",{className:"homepage-navigation ",children:[Object(j.jsxs)("div",{className:"menu-user",children:[Object(j.jsx)("div",{className:"user-img",children:Object(j.jsx)("img",{src:S})}),Object(j.jsx)("p",{children:"Admin"})]}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"dashboard"==d?"active":"",onClick:function(){return p("dashboard")},children:[Object(j.jsx)("i",{className:"fa fa-tachometer","aria-hidden":"true"})," Dashboard"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"websitevariables"==d?"active":"",onClick:function(){return p("websitevariables")},children:[Object(j.jsx)("i",{className:"fa fa-level-up","aria-hidden":"true"})," Update Website Variables"]})}),Object(j.jsx)("li",{children:Object(j.jsxs)(N.a,{variant:"secondary",size:"lg",className:"documenttypelist"==d?"active":"",onClick:function(){return p("documenttypelist")},children:[Object(j.jsx)("i",{className:"fa fa-list","aria-hidden":"true"})," Update Document Type List"]})})]})]})}),Object(j.jsxs)("div",{className:"dashboard-content page-content",children:[Object(j.jsx)("label",{for:"side",class:"toggle",children:"\u2630"}),Object(j.jsxs)(v.a,{className:"homepage-pageData",children:["dashboard"==d?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" Admin Panel"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)(v.a,{children:Object(j.jsxs)(v.a,{className:"dashboard-summary-details",children:[Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",children:["Total Customers ",Object(j.jsx)(Y.a,{bg:"secondary",children:x}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Total Customers ",x]})]})}),Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",children:["Total Merchants ",Object(j.jsx)(Y.a,{bg:"secondary",children:T}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Total Merchants ",T]})]})}),Object(j.jsx)(w.a,{md:4,children:Object(j.jsxs)(N.a,{variant:"primary",size:"lg",children:["Total Documents Uploaded ",Object(j.jsx)(Y.a,{bg:"secondary",children:0}),Object(j.jsxs)("span",{className:"visually-hidden",children:["Total Documents Uploaded ",0]})]})})]})})]}):Object(j.jsx)(j.Fragment,{}),"websitevariables"==d?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"page-heading",children:Object(j.jsx)("h2",{children:" Update Website Variables"})}),Object(j.jsxs)(R.a,{children:[Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{xs:"2",children:Object(j.jsx)(R.a.Label,{controlId:"nameOnDocument",children:"No Of Document Allowed"})}),Object(j.jsx)(w.a,{xs:"6",children:Object(j.jsx)(R.a.Control,{type:"text",id:"nameOnDocument",className:"input-design",placeholder:"",value:B,onChange:function(e){return P(e.target.value)},required:!0})}),Object(j.jsx)(w.a,{xs:"auto",children:Object(j.jsx)(N.a,{onClick:function(){return se(D)},children:"Update"})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{xs:"2",children:Object(j.jsx)(R.a.Label,{controlId:"nameOnDocument",children:"BDLT Token Address"})}),Object(j.jsx)(w.a,{xs:"6",children:Object(j.jsx)(R.a.Control,{type:"text",id:"nameOnDocument",className:"input-design",placeholder:"",value:ee,onChange:function(e){return te(e.target.value)},required:!0})}),Object(j.jsx)(w.a,{xs:"auto",children:Object(j.jsx)(N.a,{onClick:function(){return re()},children:"Update"})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{xs:"2",children:Object(j.jsx)(R.a.Label,{controlId:"nameOnDocument",children:"Referral Reward Value"})}),Object(j.jsx)(w.a,{xs:"6",children:Object(j.jsx)(R.a.Control,{type:"text",id:"nameOnDocument",className:"input-design",placeholder:"",value:X,onChange:function(e){return Q(e.target.value)},required:!0})}),Object(j.jsx)(w.a,{xs:"auto",children:Object(j.jsx)(N.a,{onClick:function(){return ue()},children:"Update"})})]}),Object(j.jsxs)(v.a,{children:[Object(j.jsx)(w.a,{xs:"2",children:Object(j.jsx)(R.a.Label,{controlId:"nameOnDocument",children:"Request Fees"})}),Object(j.jsx)(w.a,{xs:"6",children:Object(j.jsx)(R.a.Control,{type:"text",id:"nameOnDocument",className:"input-design",placeholder:"",value:G,onChange:function(e){return H(e.target.value)},required:!0})}),Object(j.jsx)(w.a,{xs:"auto",children:Object(j.jsx)(N.a,{onClick:function(){return ie()},children:"Update"})})]})]})]}):Object(j.jsx)(j.Fragment,{}),"documenttypelist"==d?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"page-heading",children:[Object(j.jsx)("h2",{children:" Update Document Type List"}),Object(j.jsx)("span",{children:" List of all document type for user to select document from."}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsxs)(v.a,{children:["Total Document Types : ",D.length," ",Object(j.jsx)("br",{}),Object(j.jsx)(N.a,{onClick:function(){return F([null,-1,!1])},children:Object(j.jsx)("i",{class:"fa fa-plus-square-o","aria-hidden":"true"})}),Object(j.jsxs)(z.a,{striped:!0,bordered:!0,hover:!0,variant:"light",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsxs)("th",{children:["Document Type",Object(j.jsx)("br",{}),"(non-spacing text)"]}),Object(j.jsxs)("th",{children:["Document Type Text",Object(j.jsx)("br",{}),"(User view)"]}),Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsx)("tbody",{children:D.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.value}),Object(j.jsx)("td",{children:e.text}),Object(j.jsxs)("td",{children:[Object(j.jsx)(N.a,{onClick:function(){return F([e,t,!0])},children:Object(j.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true"})}),Object(j.jsx)(N.a,{onClick:function(){return function(e){var t=Object(oe.a)(D);t.splice(e,1),I(t),se()}(t)},children:Object(j.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})]})]},t)}))})]})]})]}):Object(j.jsx)(j.Fragment,{})]})]})]})]}):Object(j.jsx)(h.a,{to:"/"})};var ue=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(a.useContext)(b),c=Object(l.a)(r,2),p=c[0],O=(c[1],Object(a.useState)(0)),x=Object(l.a)(O,2),f=x[0],y=x[1],v=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.INRTContract){e.next=6;break}return e.next=3,p.INRTContract.methods.balanceOf(p.walletAddress).call();case 3:t=e.sent,console.log(t),f!=t&&y(t/Math.pow(10,6));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(m.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u.a,{autoClose:4e3,limit:3}),Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)(g,{tokenCount:f,setTokenCount:y,updateBalance:v})}),Object(j.jsxs)("div",{className:n?"pageData loading-div":"pageData",children:[Object(j.jsx)("div",{className:n?"loading-bar-center":"hide",children:Object(j.jsx)(d.a,{animation:"border",role:"status",children:Object(j.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(j.jsxs)(h.d,{children:[Object(j.jsx)(h.b,{exact:!0,path:"/",children:Object(j.jsx)(L,{})}),Object(j.jsx)(h.b,{exact:!0,path:"/login",children:Object(j.jsx)(K,{loading:n,setLoading:s})}),Object(j.jsx)(h.b,{exact:!0,path:"/home",children:Object(j.jsx)(se,{loading:n,setLoading:s,updateBalance:v})}),Object(j.jsx)(h.b,{exact:!0,path:"/merchant/login",children:Object(j.jsx)(re,{loading:n,setLoading:s})}),Object(j.jsx)(h.b,{exact:!0,path:"/merchant/home",children:Object(j.jsx)(ce,{loading:n,setLoading:s,tokenCount:f,setTokenCount:y,updateBalance:v})}),Object(j.jsx)(h.b,{exact:!0,path:"/admin/login",children:Object(j.jsx)(ie,{loading:n,setLoading:s})}),Object(j.jsx)(h.b,{exact:!0,path:"/admin/home",children:Object(j.jsx)(de,{loading:n,setLoading:s,tokenCount:f,setTokenCount:y})}),Object(j.jsx)(h.b,{path:"*",children:Object(j.jsx)("div",{children:"Page not found"})})]})]}),Object(j.jsx)("div",{className:"footer",children:Object(j.jsx)(T,{})})]})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,700)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(p,{children:Object(j.jsx)(ue,{})})}),document.getElementById("root")),je()}},[[680,1,2]]]);
//# sourceMappingURL=main.4b514022.chunk.js.map